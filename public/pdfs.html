<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>PDF-Center</title>
  <style>
    :root{--txt:#0b1220;--muted:#6b7280;--bg:#fff;--line:#e5e7eb;--brand:#2563eb}
    *{box-sizing:border-box} body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;color:var(--txt);background:var(--bg)}
    header{padding:14px 20px;border-bottom:1px solid var(--line)} h1{margin:0;font-size:18px}
    main{max-width:1100px;margin:0 auto;padding:18px}
    table{width:100%;border-collapse:collapse;border:1px solid var(--line);border-radius:12px;overflow:hidden;background:#fff}
    th,td{padding:10px;border-bottom:1px solid var(--line);text-align:left}
    a.btn{display:inline-block;background:var(--brand);color:#fff;padding:8px 12px;border-radius:8px;text-decoration:none}
    .muted{color:var(--muted)}
  </style>
</head>
<body>
<header><h1>ðŸ“š PDF-Center</h1></header>
<main>
  <p class="muted">Hier findest du alle von dir erzeugten PDFs.</p>
  <table>
    <thead><tr><th>Datei</th><th>GrÃ¶ÃŸe</th><th>Datum</th><th>Aktion</th></tr></thead>
    <tbody id="list"><tr><td colspan="4" class="muted">Lade Daten â€¦</td></tr></tbody>
  </table>
</main>
<script>
function fmtSize(bytes){ if(bytes<1024) return bytes+" B"; if(bytes<1024*1024) return (bytes/1024).toFixed(1)+" KB"; return (bytes/1024/1024).toFixed(1)+" MB"; }
fetch("/api/pdfs").then(r=>r.json()).then(rows=>{
  const tb=document.getElementById("list"); tb.innerHTML="";
  if(!rows.length){ tb.innerHTML='<tr><td colspan="4" class="muted">Keine PDFs gefunden.</td></tr>'; return; }
  for(const f of rows){
    const tr=document.createElement("tr");
    const dt=new Date(f.mtime);
    tr.innerHTML=`
      <td><a href="${f.url}" target="_blank" rel="noopener">${f.name}</a></td>
      <td>${fmtSize(f.size)}</td>
      <td>${dt.toLocaleString()}</td>
      <td><a class="btn" href="${f.url}" download>Herunterladen</a></td>
    `;
    tb.appendChild(tr);
  }
}).catch(()=>{ document.getElementById("list").innerHTML='<tr><td colspan="4">Fehler beim Laden.</td></tr>'; });
</script>
</body>
</html>
